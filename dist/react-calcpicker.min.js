!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("numeral"),require("numeral/locales"),require("class-names"),require("react-portal"),require("prop-types")):"function"==typeof define&&define.amd?define(["react","numeral","numeral/locales","class-names","react-portal","prop-types"],e):"object"==typeof exports?exports.ReactCalcPicker=e(require("react"),require("numeral"),require("numeral/locales"),require("class-names"),require("react-portal"),require("prop-types")):t.ReactCalcPicker=e(t.React,t.numeral,t.locales,t.classNames,t.Portal,t.PropTypes)}(this,function(t,e,n,o,i,r){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Action=e.Rect=e.CalcPicker=void 0;var i=n(1),r=o(i),a=n(8),l=o(a),s=n(10),u=o(s);e.CalcPicker=r.default,e.Rect=l.default,e.Action=u.default},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),s=o(l),u=n(3),c=o(u);n(4);var f=n(5),p=o(f),d=n(9),h=o(d),y=n(11),m=o(y),g=n(8),b=o(g),w=n(10),k=o(w),T=function(t){function e(n){i(this,e);var o=r(this,t.call(this,n));return c.default.locale(n.locale),o.state={openCalculator:!1,amount:n.initialAmount},window.onkeydown=function(t){o.state.openCalculator&&o.props.buttons.forEach(function(e){return e.forEach(function(e){e.keyDown&&e.keyDown(t)&&(t.preventDefault(),e.action(o.refs.calculator,e,t))})})},o}return a(e,t),e.prototype.componentWillReceiveProps=function(t){this.props.locale!=t.locale&&c.default.locale(t.locale)},e.prototype.onClickAmount=function(t){return t.preventDefault(),this.setState({openCalculator:!0}),!1},e.prototype.onClosePortal=function(){1==this.state.openCalculator&&this.setState({openCalculator:!1})},e.prototype.changeValue=function(t){this.state.amount!=t&&this.setState({amount:t})},e.prototype.render=function(){var t=this;return s.default.createElement("div",{className:"react-calcpicker"},s.default.createElement("button",{ref:"button",className:this.props.className,onClick:function(e){return t.onClickAmount(e)}},(0,c.default)(this.state.amount).format(this.props.format)),s.default.createElement(h.default,{closeOnEsc:!0,closeOnOutsideClick:!0,isOpened:this.state.openCalculator,onClose:function(){return t.onClosePortal()}},s.default.createElement(p.default,{ref:"calculator",initialAmount:this.state.amount,onClickClose:function(){return t.setState({openCalculator:!1})},button:this.refs.button,positions:this.props.positions,buttons:this.props.buttons,onCalculated:function(e){return t.changeValue(e)},closeButton:this.props.closeButton})))},e}(s.default.Component);e.default=T,T.propTypes={initialAmount:m.default.number,format:m.default.string,positions:m.default.arrayOf(m.default.oneOf([b.default.RIGHT_BOTTOM,b.default.LEFT_BOTTOM,b.default.RIGHT_TOP,b.default.LEFT_TOP])),buttons:m.default.arrayOf(m.default.arrayOf(m.default.shape({style:m.default.oneOf(["default","primary","light","dark","warning"]),display:m.default.oneOfType([m.default.object,m.default.string]).require,action:m.default.func.require,keyDown:m.default.func}))),className:m.default.string,closeButton:m.default.oneOfType([m.default.object,m.default.string]),locale:m.default.string},T.defaultProps={initialAmount:0,format:"0,0[.]00",positions:[b.default.RIGHT_BOTTOM],closeButton:"×",buttons:[[{style:"dark",display:s.default.createElement("span",null,"AC"),action:k.default.allClear,keyDown:function(t){return"Clear"==t.key}},{style:"dark",display:s.default.createElement("span",null,"←"),action:k.default.backspace,keyDown:function(t){return"Backspace"==t.key}},{style:"light",display:s.default.createElement("span",null,"%"),action:k.default.percent,keyDown:function(t){return"%"==t.key}},{style:"primary",display:s.default.createElement("span",null,"÷"),action:k.default.division,keyDown:function(t){return"/"==t.key}}],[{style:"default",display:s.default.createElement("span",null,"7"),action:k.default.seven,keyDown:function(t){return"7"==t.key}},{style:"default",display:s.default.createElement("span",null,"8"),action:k.default.eight,keyDown:function(t){return"8"==t.key}},{style:"default",display:s.default.createElement("span",null,"9"),action:k.default.nine,keyDown:function(t){return"9"==t.key}},{style:"primary",display:s.default.createElement("span",null,"×"),action:k.default.multiplication,keyDown:function(t){return"*"==t.key}}],[{style:"default",display:s.default.createElement("span",null,"4"),action:k.default.four,keyDown:function(t){return"4"==t.key}},{style:"default",display:s.default.createElement("span",null,"5"),action:k.default.five,keyDown:function(t){return"5"==t.key}},{style:"default",display:s.default.createElement("span",null,"6"),action:k.default.six,keyDown:function(t){return"6"==t.key}},{style:"primary",display:s.default.createElement("span",null,"-"),action:k.default.minus,keyDown:function(t){return"-"==t.key}}],[{style:"default",display:s.default.createElement("span",null,"1"),action:k.default.one,keyDown:function(t){return"1"==t.key}},{style:"default",display:s.default.createElement("span",null,"2"),action:k.default.two,keyDown:function(t){return"2"==t.key}},{style:"default",display:s.default.createElement("span",null,"3"),action:k.default.three,keyDown:function(t){return"3"==t.key}},{style:"primary",display:s.default.createElement("span",null,"+"),action:k.default.plus,keyDown:function(t){return"+"==t.key}}],[{style:"default",display:s.default.createElement("span",null,"0"),action:k.default.zero,keyDown:function(t){return"0"==t.key}},{style:"default",display:s.default.createElement("span",null,"00"),action:k.default.doubleZero,keyDown:function(t){return 48==t.keyCode&&t.shiftKey}},{style:"default",display:s.default.createElement("span",null,"."),action:k.default.decimal,keyDown:function(t){return"."==t.key}},{style:"warning",display:s.default.createElement("span",null,"="),action:k.default.enter,keyDown:function(t){return"="==t.key||"Enter"==t.key}}]]}},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),s=o(l),u=n(3),c=o(u),f=n(6),p=o(f),d=n(8),h=o(d),y=function(t){function e(n){i(this,e);var o=r(this,t.call(this,n));return o.state={display:n.initialAmount,amount:n.initialAmount,appendMode:!1,format:"0,0[.]0[000000000000]",operator:{},unit:{},x:0,y:0},window.onresize=function(){return o.adjustPosition()},o}return a(e,t),e.prototype.adjustPosition=function(){if(this.refs.calculator){for(var t=h.default.createWithWindow(),e=h.default.createWithElement(this.props.button),n=h.default.createWithElement(this.refs.calculator,this.state.x,this.state.y),o=void 0,i=0;i<this.props.positions.length;i++){var r=this.props.positions[i],a=e.getRelativeRect(n,r);if(t.contains(a)){o=a;break}}o||(o=t.getRelativeRect(n,h.default.CENTER)),this.setState({x:o.transformX,y:o.transformY})}},e.prototype.inputToDisplay=function(t){this.state.appendMode?this.setState({display:this.state.display+t}):this.setState({appendMode:!0,display:t})},e.prototype.calc=function(t,e,n){switch(e){case"+":return"%"==this.state.unit.value&&(n=t*(n/100)),t+n;case"-":return"%"==this.state.unit.value&&(n=t*(n/100)),t-n;case"/":return"%"==this.state.unit.value&&(n/=100),t/n;case"*":return"%"==this.state.unit.value&&(n/=100),t*n;default:throw"Invalid operator "+e+" specified."}},e.prototype.execute=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=this.state.display,o=this.state.amount,i=!1;this.state.operator.value&&(n=this.calc(parseFloat(o,10),this.state.operator.value,parseFloat(n,10)),i=!0),o=n,this.setState({operator:{},unit:{},display:n,amount:o,appendMode:!1},function(){e(),i&&t.fix()})},e.prototype.inputOperator=function(t,e){var n=this;this.state.appendMode?this.execute(function(){n.setState({appendMode:!1,operator:{value:t,display:e.display}})}):this.setState({operator:{value:t,display:e.display}})},e.prototype.inputDecimal=function(){-1===this.state.display.indexOf(".")&&this.inputToDisplay(".")},e.prototype.inputPercent=function(t){this.state.operator.value?this.setState({unit:{value:"%",display:t.display}}):this.setState({display:this.state.display/100})},e.prototype.clear=function(){this.state.appendMode&&this.setState({display:"0",appendMode:!1,unit:{}})},e.prototype.allClear=function(){this.setState({display:"0",amount:"0",operator:{},appendMode:!1,unit:{}})},e.prototype.delete=function(){if(this.state.appendMode){var t={},e=this.state.display.toString();"0"===e&&(t.unit={}),e=e.substr(0,e.length-1),t.display=e||0,this.setState(t)}},e.prototype.componentDidMount=function(){this.adjustPosition()},e.prototype.fix=function(){this.props.onCalculated&&this.props.onCalculated(this.state.amount)},e.prototype.render=function(){var t=this;c.default.localeData();return s.default.createElement("div",{ref:"calculator",className:"react-calcpicker__calculator",style:{transform:"translate("+this.state.x+"px, "+this.state.y+"px)"}},s.default.createElement("div",{className:"react-calcpicker__calculator-header"},s.default.createElement(p.default,{className:"react-calcpicker__calculator-button-close",display:this.props.closeButton,onClick:this.props.onClickClose})),s.default.createElement("div",{className:"react-calcpicker__calculator-display"},s.default.createElement("div",{className:"react-calcpicker__calculator-display-operator"},this.state.operator.display),s.default.createElement("div",{className:"react-calcpicker__calculator-display-number"},(0,c.default)(this.state.display).format(this.state.format),this.state.unit.display)),this.props.buttons.map(function(e,n){return s.default.createElement("div",{key:n,className:"react-calcpicker__calculator-buttons"},e.map(function(e,o){return s.default.createElement(p.default,{ref:function(t){return e.component=t},key:n+"-"+o,className:e.className,style:e.style,size:e.size,display:e.display,onClick:function(n){return e.action(t,e,n)}})}))}))},e}(s.default.Component);e.default=y},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),s=o(l),u=n(7),c=o(u),f=function(t){function e(n){return i(this,e),r(this,t.call(this,n))}return a(e,t),e.prototype.onClick=function(t){return t.preventDefault(),this.props.onClick(t),!1},e.prototype.getSizeClass=function(){if(this.props.size){var t=[];return this.props.size.width&&t.push("react-calcpicker__calculator-button-"+this.props.size.width+"w"),this.props.size.height&&t.push("react-calcpicker__calculator-button-"+this.props.size.height+"h"),t}},e.prototype.render=function(){var t=this;return s.default.createElement("button",{ref:"element",className:(0,c.default)("react-calcpicker__calculator-button",this.props.style?"react-calcpicker__calculator-button-"+this.props.style:void 0,this.getSizeClass(),this.props.className),onClick:function(e){return t.onClick(e)}},this.props.display)},e}(s.default.Component);e.default=f},function(t,e){t.exports=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(){function t(e,o,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.top=e,this.left=o,this.width=i,this.height=r,this.transformX=a,this.transformY=l}return t.prototype.getCenterRect=function(e,n){var o={x:this.left+this.width/2,y:this.top+this.height/2};return new t(o.y-n/2,o.x-e/2,e,n)},t.prototype.clone=function(){return new t(this.top,this.left,this.width,this.height,this.transformX,this.transformY)},t.prototype.transform=function(t,e){return this.top=this.originTop+e,this.left=this.originLeft+t,this.transformX=t,this.transformY=e,this},t.prototype.contains=function(t){return this.left<=t.left&&this.right>=t.right&&this.top<=t.top&&this.bottom>=t.bottom},t.prototype.dump=function(){return{top:this.top,left:this.left,bottom:this.bottom,right:this.right,width:this.width,height:this.height,originTop:this.originTop,originLeft:this.originLeft,originBottom:this.originBottom,originRight:this.originRight,transformX:this.transformX,transformY:this.transformY}},t.prototype.getRelativeRect=function(e,n){switch(n){case t.RIGHT_BOTTOM:return e.clone().transform(this.left-e.originLeft,this.bottom-e.originTop);case t.LEFT_BOTTOM:return e.clone().transform(this.right-e.originRight,this.bottom-e.originTop);case t.LEFT_TOP:return e.clone().transform(this.right-e.originRight,this.top-e.originBottom);case t.RIGHT_TOP:return e.clone().transform(this.left-e.originLeft,this.top-e.originBottom);case t.CENTER:var o=this.getCenterRect(e.width,e.height);return e.clone().transform(o.left-e.originLeft,o.top-e.originTop);default:throw"Illegal positionKey `"+n+"` is specified"}},o(t,[{key:"bottom",get:function(){return this.top+this.height}},{key:"right",get:function(){return this.left+this.width}},{key:"originTop",get:function(){return this.top-this.transformY}},{key:"originLeft",get:function(){return this.left-this.transformX}},{key:"originBottom",get:function(){return this.originTop+this.height}},{key:"originRight",get:function(){return this.originLeft+this.width}}]),t}();e.default=i,i.createWithElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!t)return new i(0,0,0,0);var o=t.getBoundingClientRect(),r=document.body,a=document.documentElement,l=window.pageYOffset||a.scrollTop||r.scrollTop,s=window.pageXOffset||a.scrollLeft||r.scrollLeft,u=a.clientTop||r.clientTop||0,c=a.clientLeft||r.clientLeft||0;return new i(o.top+l-u,o.left+s-c,o.width,o.height,e,n)},i.createWithWindow=function(){return new i(window.pageYOffset||document.documentElement.scrollTop,window.pageXOffset||document.documentElement.scrollLeft,document.documentElement.clientWidth,document.documentElement.clientHeight)},Object.defineProperty(i,"RIGHT_TOP",{enumerable:!1,configurable:!1,writable:!1,value:"RIGHT_TOP"}),Object.defineProperty(i,"LEFT_TOP",{enumerable:!1,configurable:!1,writable:!1,value:"LEFT_TOP"}),Object.defineProperty(i,"RIGHT_BOTTOM",{enumerable:!1,configurable:!1,writable:!1,value:"RIGHT_BOTTOM"}),Object.defineProperty(i,"LEFT_BOTTOM",{enumerable:!1,configurable:!1,writable:!1,value:"LEFT_BOTTOM"}),Object.defineProperty(i,"CENTER",{enumerable:!1,configurable:!1,writable:!1,value:"CENTER"})},function(t,e){t.exports=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={one:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("1")},two:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("2")},three:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("3")},four:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("4")},five:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("5")},six:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("6")},seven:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("7")},eight:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("8")},nine:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("9")},zero:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("0")},doubleZero:function(t,e,n){e.component.refs.element.focus(),t.inputToDisplay("00")},decimal:function(t,e,n){e.component.refs.element.focus(),t.inputDecimal()},percent:function(t,e,n){e.component.refs.element.focus(),t.inputPercent(e)},plus:function(t,e,n){e.component.refs.element.focus(),t.inputOperator("+",e)},minus:function(t,e,n){e.component.refs.element.focus(),t.inputOperator("-",e)},multiplication:function(t,e,n){e.component.refs.element.focus(),t.inputOperator("*",e)},division:function(t,e,n){e.component.refs.element.focus(),t.inputOperator("/",e)},enter:function(t,e,n){e.component.refs.element.focus(),t.execute()},allClear:function(t,e,n){e.component.refs.element.focus(),t.allClear()},clear:function(t,e,n){e.component.refs.element.focus(),t.clear()},backspace:function(t,e,n){e.component.refs.element.focus(),t.delete()}};e.default=n},function(t,e){t.exports=r}])});